<h1>Tryhackme - ignite(1)</h1>

칼리리눅스 환경 셋팅을 한 이후에 노말틱님 강의를 보고 처음 배우는 부분과 궁금했던 부분에 대해서 공부를한 후에 정리를 해서 블로그에 작성했습니다.

제일 처음으로 할 것은 tryhackme 사이트의 ignite입니다.
![이미지](/assets/ignite/1.png)

모의해킹을 공부할 때 아무 사이트나 막 공격을 해서 취약점을 찾고 해킹을 할 수는 없으니 tryhackme 사이트를 사용하는 것인데 tryhackme에서는 나만이 사용하고 공격할 수 있는 가상의 서버를 생성 해준다.
*오직 나만을 위한 것이다*


해킹의 절차

#1 정보 수집
공격할 IP가 밝혀졌다면 공격하기 전에 해야할 것은 해당 웹사이트에 대한 정보를 수집하고 얻는 것이다.
하지만 실제로 정보를 주고 받기 위해서는 각 프로세스마다 포트번호가 지정되어 통신을 하게 된다

```
공격을 하기 위해서 가장 필요한 정보 
1. IP 주소
2. Port Number
```

예를 들어, 1234번 포트에 카카오톡이 연결되어있고 이 컴퓨터에 1234번 포트로 데이터를 보내면 그 데이터는 카카오톡으로 넘어가게 되어있다. 그래서 포트번호도 빠질 수 없이 중요한 부분이다

만약 내가 어떤 컴퓨터를 공격할 때, 데이터를 보내야할 때 그 컴퓨터에서 열려있는 포트로 공격을 하고 데이터를 보내야한다 그냥 막무가내로 1번 포트로 데이터를 보낼꺼야!! 라고하고 1번 포트로 데이터를 보내면 그 컴퓨터가 1번포트가 열려있지 않는한 그냥 무시해버린다. 전혀 영향이 없다는 뜻이다.
그렇기 때문에 어떤 포트가 열려있는지 확인을 하는 것 그 작업이 바로 *포트스캔* 이라는 작업이다.


#1.1 포트스캔
| 어떤 포트가 열려있는지 확인하는 작업

*nmap* 이라는 해킹툴을 사용하여 포트 스캔을 할 것이다.

`nmap [IP]`

![이미지](/assets/ignite/2.png)
이 사진에 나와있는 것을 보면 80/tcp 포트가 열려있는 것을 확인 할 수 있다.

nmap 의 특징
- 어떤 포트가 열려있는지 일단 데이터를 전송해서 답장이 오는 것을 판단해서 열려있는 포트를 확인한다.
- nmap이 포트스캔을 할때에는 기본적으로 1부터 스캔하는 것이 아닌 자주 사용하고 많이 사용하는 포트 위주로 검색을 한다 (시간이 너무 오래 걸려서)
- `-p-` : 옵션을 넣어주면 처음부터 끝까지 열려있는 포트를 스캔하기 시작한다
- 또 기본적으로 순차적으로 스캔하지 않고 랜덤으로 스캔을 하는데 1부터 끝까지 순차적으로 스캔을 하면 누가봐도 나 해킹해요~ 라고 알리는 것과 같다. 그래서 따로 옵션을 지정해주지 않으면 랜덤한 포트로 스캔을 한다
- `-r` : 1번부터 순차적으로 스캔을 실시한다.
- `-sV` : 그 포트에 어떤 서비스와 어떤 버전을 사용하고 있는지 알려준다.
- nmap 스크립트 경로 (/usr/share/namp/scripts/) .nse 확장자로 만들어진 스크립트 파일이 저장되어있음
- `-script` : 사용하고 싶은 스크립트를 실행하는것 (-script http-enum.nse)
- `-sC` : 기본 (default) 카테고리의 스크립트들을 넣어서 같이 확인해 달라는 옵션


`nmap -sV -sC [IP] > scan_res`
![이미지](/assets/ignite/3.png)

최종적으로 정보수집에서는 열려있는 포트 뿐만 아니라 서비스, 그리고 서비스가 어떤 버전을 가지고 있는지 까지 파악을 완료했다.



#2 서비스 분석, 취약점 찾기

취약점을 전문가들이 분석해서 공개를 하면 CVE 코드 라는 것이 발급이 되고 세상에 공개가 된다
그것을 바로 공개하는가? 아니다.
모든 해커들이 공격하라고 바로 공개하는 것이 아니라 이 취약점을 찾게 되면 만든 회사에 이러한 취약점이 발견되었다고 연락하는 것이 매너이다. 그 과정을 거치고 나서 세상에 공개된다.
어느 정도는 만든 회사에서 업데이트를 하지만 즉각즉각 바로 업데이트를 하지 않는다 라는 단점도 존재를 하게 된다.

여기서 우리가 해야할 것은 스캔하였을 때의 버전에서 공개된 취약점이 있는가?
그것을 search 하는 방법이 있다.
1. google -> apache httpd 2.4.18 vulnerability (exploit)
2. exploit db 사이트 이용
3. searchsploit 명령어 사용 -> exploit db와 연동되어있는 도구이다.


![이미지](/assets/ignite/4.png)

새로운 취약점이 발견되었다.

apache httpd 2.4.18 에서는 취약점이 발견되지 않앗지만
웹사이트에서 사용하고 있는 fuel cms 1.4 에서 취약점이 발견되었다.

#2.1 취약점 분석

1. Remote Code Execution
 - RCE는 원격지에서 임의의 공격 명령 실행이 가능한 취약점이다.
 - 대표적으로 관리자 권한 획득을 통해 시스템을 장악하기 위한 권한 상승 취약점이 존재, 주로 피해 시스템/네트워크에 침입하기 위한 초기 침투시 사용

2. SQL injection
 - 악의적인 사용자가 보안상 취약점을 이용하여 임의의 SQL 문을 주입하고 실행되게 하여 DB가 비정상적인 동작을 하도록 조작하는 행위
 - 공격이 비교적 쉬우며 공격에 성공할 경우 큰 피해를 입힐 수 있다 (여기어때에서 발생한 피해가 있다.)

